<!doctype html>
<html lang="zh-CN">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>Blog 详情</title>
  <link rel="stylesheet" href="./assets/blog.css" />
</head>
<body>
  <header class="topbar">
    <a class="brand" href="./index.html">← 返回列表</a>
    <h1>Blog 详情</h1>
  </header>

  <main class="container">
    <article id="post" class="post"></article>
  </main>

  <script src="./assets/posts.js"></script>
  <script>
    const params = new URLSearchParams(window.location.search);
    const slug = params.get('slug');
    const post = posts.find((p) => p.slug === slug);
    const root = document.getElementById('post');

    if (!post) {
      const h2 = document.createElement('h2');
      h2.textContent = '未找到文章';
      const p = document.createElement('p');
      p.textContent = '请返回列表选择文章。';
      root.replaceChildren(h2, p);
    } else {
      const fmt = (d) => new Date(d).toLocaleDateString('zh-CN', { year: 'numeric', month: 'short', day: 'numeric' });

      const h2 = document.createElement('h2');
      h2.textContent = post.title || '';

      const meta = document.createElement('p');
      meta.className = 'meta';
      meta.textContent = `${fmt(post.date)} · ${post.author || ''}`;

      const content = document.createElement('div');
      content.className = 'content';
      (post.content || []).forEach((line) => {
        const para = document.createElement('p');
        para.textContent = line || '';
        content.appendChild(para);
      });

      root.replaceChildren(h2, meta, content);
    }
  </script>
</body>
</html>
